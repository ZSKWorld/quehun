{"version":3,"file":"laya.trail3D.js","sources":["../../bin/tsc/layaAir/laya/trail/trail3D/Shader/Trail.vs","../../bin/tsc/layaAir/laya/trail/trail3D/Shader/Trail.fs","../../bin/tsc/layaAir/laya/trail/trail3D/Shader/TrailShaderInit.js","../../bin/tsc/layaAir/laya/trail/trail3D/TrailMaterial.js","../../bin/tsc/layaAir/laya/trail/trail3D/TrailFilter.js","../../bin/tsc/layaAir/laya/trail/trail3D/TrailRenderer.js","../../bin/tsc/layaAir/laya/trail/trail3D/ModuleDef.js"],"sourcesContent":["#define SHADER_NAME TrailVS\n\n#include \"Camera.glsl\";\n#include \"Scene.glsl\"\n#include \"SceneFogInput.glsl\"\n\n#include \"TrailVertexUtil.glsl\"\n\nvoid main()\n{\n    float normalizeTime = (u_CurTime - a_BirthTime) / u_LifeTime;\n\n    v_Texcoord0 = vec2(a_Texcoord0X, 1.0 - a_Texcoord0Y) * u_TilingOffset.xy + u_TilingOffset.zw;\n\n    v_Color = a_Color;\n\n    vec3 cameraPos = (u_View * a_position).rgb;\n    gl_Position = u_Projection * vec4(cameraPos + a_OffsetVector * getCurWidth(normalizeTime), 1.0);\n\n    gl_Position = remapPositionZ(gl_Position);\n\t#ifdef FOG\n        FogHandle(gl_Position.z);\n    #endif\n}","#define SHADER_NAME TrailFS\n\n#include \"Color.glsl\";\n#include \"Scene.glsl\";\n#include \"SceneFog.glsl\";\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nvoid main()\n{\n    vec4 color = 2.0 * u_MainColor * v_Color;\n#ifdef MAINTEXTURE\n    vec4 mainTextureColor = texture2D(u_MainTexture, v_Texcoord0);\n    #ifdef Gamma_u_MainTexture\n    mainTextureColor = gammaToLinear(mainTextureColor);\n    #endif // Gamma_u_MainTexture\n\n    color *= mainTextureColor;\n#endif\n\n#ifdef FOG\n    color.xyz = scenUnlitFog(color.xyz);\n#endif // FOG\n    gl_FragColor = color;\n\n    gl_FragColor = outputTransform(gl_FragColor);\n}\n","import TrailVS from \"./Trail.vs\";\nimport TrailFS from \"./Trail.fs\";\nimport { TrailMaterial } from \"../TrailMaterial\";\nimport { Shader3D, ShaderFeatureType } from \"../../../RenderEngine/RenderShader/Shader3D\";\nimport { SubShader } from \"../../../RenderEngine/RenderShader/SubShader\";\nimport { TrailShaderCommon } from \"../../trailCommon/RenderFeatureComman/Trail/TrailShaderCommon\";\nexport class TrailShaderInit {\n    static init() {\n        TrailShaderCommon.init();\n        let shader = Shader3D.add(\"Trail\", false, false);\n        shader.shaderType = ShaderFeatureType.Effect;\n        let subShader = new SubShader(TrailShaderCommon.attributeMap, TrailShaderCommon.uniformMap, TrailShaderCommon.defaultValue);\n        shader.addSubShader(subShader);\n        let forwardPass = subShader.addShaderPass(TrailVS, TrailFS);\n        TrailMaterial.defaultMaterial = new TrailMaterial();\n        TrailMaterial.defaultMaterial.lock = true;\n    }\n}\n","import { Laya } from \"../../../Laya\";\nimport { RenderState } from \"../../RenderDriver/RenderModuleData/Design/RenderState\";\nimport { Shader3D } from \"../../RenderEngine/RenderShader/Shader3D\";\nimport { Material, MaterialRenderMode } from \"../../resource/Material\";\nimport { TrailShaderInit } from \"./Shader/TrailShaderInit\";\nexport class TrailMaterial extends Material {\n    static __initDefine__() {\n        TrailMaterial.MAINTEXTURE = Shader3D.propertyNameToID(\"u_MainTexture\");\n        TrailMaterial.TINTCOLOR = Shader3D.propertyNameToID(\"u_MainColor\");\n        TrailMaterial.TILINGOFFSET = Shader3D.propertyNameToID(\"u_TilingOffset\");\n        TrailShaderInit.init();\n    }\n    get color() {\n        return this._shaderValues.getColor(TrailMaterial.TINTCOLOR);\n    }\n    set color(value) {\n        this._shaderValues.setColor(TrailMaterial.TINTCOLOR, value);\n    }\n    get texture() {\n        return this._shaderValues.getTexture(TrailMaterial.MAINTEXTURE);\n    }\n    set texture(value) {\n        if (value)\n            this._shaderValues.addDefine(TrailMaterial.SHADERDEFINE_MAINTEXTURE);\n        else\n            this._shaderValues.removeDefine(TrailMaterial.SHADERDEFINE_MAINTEXTURE);\n        this._shaderValues.setTexture(TrailMaterial.MAINTEXTURE, value);\n    }\n    get tilingOffset() {\n        return this._shaderValues.getVector(TrailMaterial.TILINGOFFSET);\n    }\n    set tilingOffset(value) {\n        if (value) {\n            this._shaderValues.setVector(TrailMaterial.TILINGOFFSET, value);\n        }\n        else {\n            this._shaderValues.getVector(TrailMaterial.TILINGOFFSET).setValue(1.0, 1.0, 0.0, 0.0);\n        }\n    }\n    constructor() {\n        super();\n        this.setShaderName(\"Trail\");\n        this.materialRenderMode = MaterialRenderMode.RENDERMODE_ALPHABLENDED;\n    }\n    clone() {\n        var dest = new TrailMaterial();\n        this.cloneTo(dest);\n        return dest;\n    }\n    set renderMode(value) {\n        switch (value) {\n            case TrailMaterial.RENDERMODE_ADDTIVE:\n                this.renderQueue = Material.RENDERQUEUE_TRANSPARENT;\n                this.depthWrite = false;\n                this.cull = RenderState.CULL_NONE;\n                this.blend = RenderState.BLEND_ENABLE_ALL;\n                this.blendSrc = RenderState.BLENDPARAM_SRC_ALPHA;\n                this.blendDst = RenderState.BLENDPARAM_ONE;\n                this.alphaTest = false;\n                this._shaderValues.addDefine(TrailMaterial.SHADERDEFINE_ADDTIVEFOG);\n                break;\n            case TrailMaterial.RENDERMODE_ALPHABLENDED:\n                this.renderQueue = Material.RENDERQUEUE_TRANSPARENT;\n                this.depthWrite = false;\n                this.cull = RenderState.CULL_NONE;\n                this.blend = RenderState.BLEND_ENABLE_ALL;\n                this.blendSrc = RenderState.BLENDPARAM_SRC_ALPHA;\n                this.blendDst = RenderState.BLENDPARAM_ONE_MINUS_SRC_ALPHA;\n                this.alphaTest = false;\n                this._shaderValues.removeDefine(TrailMaterial.SHADERDEFINE_ADDTIVEFOG);\n                break;\n            default:\n                throw new Error(\"renderMode value error: \" + value);\n        }\n    }\n}\nTrailMaterial.RENDERMODE_ALPHABLENDED = 0;\nTrailMaterial.RENDERMODE_ADDTIVE = 1;\nLaya.addAfterInitCallback(() => {\n    if (!TrailMaterial.defaultMaterial) {\n        TrailMaterial.__initDefine__();\n    }\n});\n","import { RenderElement } from \"../../d3/core/render/RenderElement\";\nimport { Vector3 } from \"../../maths/Vector3\";\nimport { TrailGeometry } from \"../trailCommon/RenderFeatureComman/Trail/TrailGeometry\";\nimport { TrailShaderCommon } from \"../trailCommon/RenderFeatureComman/Trail/TrailShaderCommon\";\nimport { TrailBaseFilter } from \"../trailCommon/RenderFeatureComman/TrailBaseFilter\";\nimport { TrailMaterial } from \"./TrailMaterial\";\nexport var TrailAlignment;\n(function (TrailAlignment) {\n    TrailAlignment[TrailAlignment[\"View\"] = 0] = \"View\";\n    TrailAlignment[TrailAlignment[\"TransformZ\"] = 1] = \"TransformZ\";\n})(TrailAlignment || (TrailAlignment = {}));\nexport class TrailFilter extends TrailBaseFilter {\n    constructor(owner) {\n        super(owner._baseRenderNode.shaderData);\n        this.alignment = TrailAlignment.View;\n        this._ownerRender = owner;\n        this.addRenderElement();\n    }\n    addRenderElement() {\n        var render = this._ownerRender;\n        var elements = render._renderElements;\n        var material = render.sharedMaterials[0];\n        (material) || (material = TrailMaterial.defaultMaterial);\n        var element = new RenderElement();\n        element.setTransform(this._ownerRender.owner._transform);\n        element.render = render;\n        element.material = material;\n        element._renderElementOBJ.geometry = this._trialGeometry._geometryElementOBj;\n        elements.push(element);\n    }\n    _update(state) {\n        var render = this._ownerRender;\n        const scene = this._ownerRender.owner.scene;\n        if (!scene)\n            return;\n        this._curtime += Math.min(scene.timer.delta / 1000, 0.016);\n        render._baseRenderNode.shaderData.setNumber(TrailShaderCommon.CURTIME, this._curtime);\n        var curPos = this._ownerRender.owner.transform.position;\n        this._trialGeometry._updateDisappear(this._curtime, this._time);\n        if (!Vector3.equals(this._lastPosition, curPos)) {\n            if ((this._trialGeometry._endIndex - this._trialGeometry._activeIndex) === 0) {\n                this._trialGeometry._addTrailByFirstPosition(curPos, this._curtime);\n            }\n            else {\n                var delVector3 = TrailGeometry._tempVector36;\n                var pointAtoBVector3 = TrailGeometry._tempVector35;\n                switch (this.alignment) {\n                    case TrailAlignment.View:\n                        var cameraMatrix = state.camera.viewMatrix;\n                        Vector3.transformCoordinate(curPos, cameraMatrix, TrailGeometry._tempVector33);\n                        Vector3.transformCoordinate(this._trialGeometry._lastFixedVertexPosition, cameraMatrix, TrailGeometry._tempVector34);\n                        Vector3.subtract(TrailGeometry._tempVector33, TrailGeometry._tempVector34, delVector3);\n                        Vector3.cross(TrailGeometry._tempVector33, delVector3, pointAtoBVector3);\n                        break;\n                    case TrailAlignment.TransformZ:\n                        Vector3.subtract(curPos, this._trialGeometry._lastFixedVertexPosition, delVector3);\n                        var forward = TrailGeometry._tempVector33;\n                        this._ownerRender.owner.transform.getForward(forward);\n                        Vector3.cross(delVector3, forward, pointAtoBVector3);\n                        break;\n                }\n                Vector3.normalize(pointAtoBVector3, pointAtoBVector3);\n                Vector3.scale(pointAtoBVector3, this._widthMultiplier / 2, pointAtoBVector3);\n                var delLength = Vector3.scalarLength(delVector3);\n                this._trialGeometry._addTrailByNextPosition(curPos, this._curtime, this._minVertexDistance, pointAtoBVector3, delLength);\n            }\n        }\n        this._trialGeometry._updateVertexBufferUV(this._colorGradient, this._textureMode);\n        curPos.cloneTo(this._lastPosition);\n        if (this._trialGeometry._disappearBoundsMode) {\n            var bounds = this._ownerRender.bounds;\n            var min, max;\n            var sprite3dPosition = this._ownerRender.owner.transform.position;\n            bounds.setMin(sprite3dPosition);\n            bounds.setMax(sprite3dPosition);\n            min = bounds.getMin();\n            max = bounds.getMax();\n            let _vertices1 = this._trialGeometry._vertices1;\n            for (var i = this._trialGeometry._activeIndex; i < this._trialGeometry._endIndex; i++) {\n                var posOffset = this._trialGeometry._floatCountPerVertices1 * 2 * i;\n                var pos = TrailGeometry._tempVector35;\n                var up = TrailGeometry._tempVector33;\n                var side = TrailGeometry._tempVector34;\n                pos.setValue(_vertices1[posOffset + 0], _vertices1[posOffset + 1], _vertices1[posOffset + 2]);\n                up.setValue(_vertices1[posOffset + 3], _vertices1[posOffset + 4], _vertices1[posOffset + 5]);\n                Vector3.add(pos, up, side);\n                Vector3.min(side, min, min);\n                Vector3.max(side, max, max);\n                Vector3.subtract(pos, up, side);\n                Vector3.min(side, min, min);\n                Vector3.max(side, max, max);\n            }\n            bounds.setMin(min);\n            bounds.setMax(max);\n            this._trialGeometry._disappearBoundsMode = false;\n        }\n        this._trialGeometry._updateRenderParams();\n    }\n}\n","import { BaseRender } from \"../../d3/core/render/BaseRender\";\nimport { TrailFilter } from \"./TrailFilter\";\nimport { RenderContext3D } from \"../../d3/core/render/RenderContext3D\";\nimport { Laya3DRender } from \"../../d3/RenderObjs/Laya3DRender\";\nimport { TrailMaterial } from \"./TrailMaterial\";\nexport class TrailRenderer extends BaseRender {\n    constructor() {\n        super();\n    }\n    _getcommonUniformMap() {\n        return [\"Sprite3D\", \"TrailRender\"];\n    }\n    _createBaseRenderNode() {\n        return Laya3DRender.Render3DModuleDataFactory.createMeshRenderNode();\n    }\n    _onAdded() {\n        super._onAdded();\n        this._trailFilter = new TrailFilter(this);\n        this._setRenderElements();\n    }\n    get time() {\n        return this._trailFilter.time;\n    }\n    set time(value) {\n        this._trailFilter.time = value;\n    }\n    get minVertexDistance() {\n        return this._trailFilter.minVertexDistance;\n    }\n    set minVertexDistance(value) {\n        this._trailFilter.minVertexDistance = value;\n    }\n    get widthMultiplier() {\n        return this._trailFilter.widthMultiplier;\n    }\n    set widthMultiplier(value) {\n        this._trailFilter.widthMultiplier = value;\n    }\n    get widthCurve() {\n        return this._trailFilter.widthCurve;\n    }\n    set widthCurve(value) {\n        this._trailFilter.widthCurve = value;\n    }\n    get colorGradient() {\n        return this._trailFilter.colorGradient;\n    }\n    set colorGradient(value) {\n        this._trailFilter.colorGradient = value;\n    }\n    get textureMode() {\n        return this._trailFilter.textureMode;\n    }\n    set textureMode(value) {\n        this._trailFilter.textureMode = value;\n    }\n    get alignment() {\n        return this._trailFilter.alignment;\n    }\n    set alignment(value) {\n        this._trailFilter.alignment = value;\n    }\n    _onEnable() {\n        super._onEnable();\n        this.owner._transform.position.cloneTo(this._trailFilter._lastPosition);\n    }\n    renderUpdate(context) {\n        this._calculateBoundingBox();\n        this._renderElements.forEach((element, index) => {\n            var _a, _b;\n            let geometry = element._geometry;\n            element._renderElementOBJ.isRender = this._trailFilter._isRender();\n            let material = (_a = this.sharedMaterial) !== null && _a !== void 0 ? _a : TrailMaterial.defaultMaterial;\n            material = (_b = this.sharedMaterials[index]) !== null && _b !== void 0 ? _b : material;\n            element.material = material;\n            element._renderElementOBJ.materialRenderQueue = material.renderQueue;\n        });\n    }\n    get bounds() {\n        return this._bounds;\n    }\n    _calculateBoundingBox() {\n        let context = RenderContext3D._instance;\n        this.boundsChange = false;\n        this._trailFilter._update(context);\n    }\n    clear() {\n        this._trailFilter.clear();\n    }\n    _onDestroy() {\n        this._trailFilter.destroy();\n        super._onDestroy();\n    }\n    _cloneTo(dest) {\n        super._cloneTo(dest);\n        dest.time = this.time;\n        dest.minVertexDistance = this.minVertexDistance;\n        var widthCurve = [];\n        var widthCurveData = this.widthCurve;\n        for (let i = 0, n = this.widthCurve.length; i < n; i++) {\n            widthCurve.push(widthCurveData[i].clone());\n        }\n        dest.widthCurve = widthCurve;\n        dest.colorGradient = this.colorGradient.clone();\n        dest.textureMode = this.textureMode;\n        dest.alignment = this.alignment;\n    }\n}\n","import { ClassUtils } from \"../../utils/ClassUtils\";\nimport { TrailFilter } from \"./TrailFilter\";\nimport { TrailMaterial } from \"./TrailMaterial\";\nimport { TrailRenderer } from \"./TrailRenderer\";\nlet c = ClassUtils.regClass;\nc(\"TrailFilter\", TrailFilter);\nc(\"TrailRenderer\", TrailRenderer);\nc(\"TrailMaterial\", TrailMaterial);\n"],"names":["TrailShaderCommon","Shader3D","ShaderFeatureType","SubShader","Material","MaterialRenderMode","RenderState","Laya","TrailAlignment","TrailBaseFilter","RenderElement","Vector3","TrailGeometry","BaseRender","Laya3DRender","RenderContext3D","ClassUtils"],"mappings":"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"}